<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Technical details and privacy information for Personal Tax Analyzer">
    <title>How It Works - Personal Tax Analyzer</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/patriotic-theme.css">
</head>
<body class="app-layout">
    <!-- Left Navigation -->
    <nav class="left-sidebar">
        <div class="sidebar-logo">
            <img src="assets/images/logo.svg" alt="Eagle Logo" class="logo-icon">
            <div class="logo-text">Personal Tax Analyzer</div>
        </div>

        <div class="sidebar-nav">
            <a href="index.html" class="sidebar-nav-item">
                <span class="nav-icon">üè†</span>
                <span class="nav-text">Home</span>
            </a>
            <a href="app.html" class="sidebar-nav-item">
                <span class="nav-icon">üìÑ</span>
                <span class="nav-text">Upload 1040</span>
            </a>
            <a href="sources.html" class="sidebar-nav-item">
                <span class="nav-icon">üìö</span>
                <span class="nav-text">Data Sources</span>
            </a>
            <a href="technical.html" class="sidebar-nav-item active">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-text">How It Works</span>
            </a>
            <a href="https://github.com/tejasgadhia/personal-tax-analyzer" target="_blank" class="sidebar-nav-item">
                <span class="nav-icon">üíª</span>
                <span class="nav-text">GitHub</span>
            </a>
        </div>

        <div class="sidebar-footer">
            <div class="sidebar-stat">
                <div class="stat-label">FY 2024 Budget</div>
                <div class="stat-value">$6.8T</div>
            </div>
            <div class="sidebar-stat">
                <div class="stat-label">Years Available</div>
                <div class="stat-value">2019-2024</div>
            </div>

            <div class="sidebar-privacy">
                <div class="privacy-icon">üîí</div>
                <div class="privacy-text">
                    <strong>100% Private</strong>
                    <p>All processing in your browser. Zero uploads.</p>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-area">
        <div class="content-wrapper" style="max-width: 900px; margin: 0 auto; padding: var(--spacing-2xl);">
            <h1 class="page-title" style="color: var(--patriot-blue); margin-bottom: var(--spacing-xl);">How It Works</h1>

            <p class="page-intro" style="font-size: var(--font-size-lg); color: var(--text-secondary); margin-bottom: var(--spacing-2xl);">
                Personal Tax Analyzer is a 100% client-side web application that runs entirely in your browser. Your tax information never leaves your device.
            </p>

            <!-- Technical Overview -->
            <section style="margin-bottom: var(--spacing-2xl);">
                <h2 style="color: var(--patriot-blue); border-bottom: 3px solid var(--patriot-red); padding-bottom: var(--spacing-sm); margin-bottom: var(--spacing-lg);">Technical Architecture</h2>

                <div style="background: white; padding: var(--spacing-xl); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); margin-bottom: var(--spacing-lg);">
                    <h3 style="color: var(--patriot-blue); margin-top: 0;">Stack & Technologies</h3>
                    <ul style="line-height: 1.8;">
                        <li><strong>Frontend:</strong> Pure HTML5, CSS3, and vanilla JavaScript (no frameworks)</li>
                        <li><strong>PDF Parsing:</strong> PDF.js v3.11.174 by Mozilla</li>
                        <li><strong>Visualization:</strong> D3.js v7 with D3-Sankey</li>
                        <li><strong>Hosting:</strong> GitHub Pages (static site hosting)</li>
                        <li><strong>Storage:</strong> Browser LocalStorage API (optional)</li>
                    </ul>
                </div>

                <div style="background: var(--bg-light); padding: var(--spacing-xl); border-radius: var(--radius-lg);">
                    <h3 style="color: var(--patriot-blue); margin-top: 0;">No Backend. No Servers. No APIs.</h3>
                    <p style="line-height: 1.8;">
                        This application is a <strong>static website</strong>. There are no backend servers processing your data. All computation happens in your browser using JavaScript.
                    </p>
                </div>
            </section>

            <!-- Application Flow -->
            <section style="margin-bottom: var(--spacing-2xl);">
                <h2 style="color: var(--patriot-blue); border-bottom: 3px solid var(--patriot-red); padding-bottom: var(--spacing-sm); margin-bottom: var(--spacing-lg);">Step-by-Step Process</h2>

                <div class="step-card" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm); border-left: 4px solid var(--patriot-blue);">
                    <h3 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Step 1: PDF Upload</h3>
                    <p style="margin: 0; line-height: 1.8;">When you drag and drop or select your Form 1040 PDF, the file is loaded into your browser's memory using the HTML5 File API. The file <strong>never leaves your device</strong>.</p>
                </div>

                <div class="step-card" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm); border-left: 4px solid var(--patriot-blue);">
                    <h3 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Step 2: PDF Parsing</h3>
                    <p style="margin: 0; line-height: 1.8;">Mozilla's PDF.js library (running in your browser) extracts text from the first 3 pages of your PDF. The parser identifies your tax year and locates Line 24 (Total Tax) using pattern matching.</p>
                </div>

                <div class="step-card" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm); border-left: 4px solid var(--patriot-blue);">
                    <h3 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Step 3: Budget Data Loading</h3>
                    <p style="margin: 0; line-height: 1.8;">Based on your tax year, the app loads the corresponding budget JSON file (e.g., budget-2024.json) from the /data/budgets/ directory. This file contains federal spending allocations.</p>
                </div>

                <div class="step-card" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm); border-left: 4px solid var(--patriot-blue);">
                    <h3 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Step 4: Calculation</h3>
                    <p style="margin: 0; line-height: 1.8;">Your tax amount is multiplied by each budget category's percentage. For example, if you paid $10,000 and Social Security is 22%, you contributed $2,200 to Social Security. All calculations happen in JavaScript.</p>
                </div>

                <div class="step-card" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm); border-left: 4px solid var(--patriot-blue);">
                    <h3 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Step 5: Visualization</h3>
                    <p style="margin: 0; line-height: 1.8;">D3.js generates an interactive Sankey diagram showing the flow from "Your Taxes" through 10 major categories to 67 subcategories. You can zoom, pan, and click for details.</p>
                </div>

                <div class="step-card" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm); border-left: 4px solid var(--patriot-blue);">
                    <h3 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Step 6: LocalStorage (Optional)</h3>
                    <p style="margin: 0; line-height: 1.8;">If you want to save your results for later, the app stores your calculated data in your browser's LocalStorage. This data stays on your device and can be cleared anytime.</p>
                </div>
            </section>

            <!-- Privacy & Security -->
            <section style="margin-bottom: var(--spacing-2xl);">
                <h2 style="color: var(--patriot-blue); border-bottom: 3px solid var(--patriot-red); padding-bottom: var(--spacing-sm); margin-bottom: var(--spacing-lg);">Privacy & Security</h2>

                <div style="background: var(--bg-light); padding: var(--spacing-xl); border-radius: var(--radius-lg); border-left: 4px solid #28a745; margin-bottom: var(--spacing-lg);">
                    <h3 style="color: #28a745; margin-top: 0;">‚úÖ What We DO</h3>
                    <ul style="line-height: 1.8;">
                        <li>Process your PDF entirely in your browser using JavaScript</li>
                        <li>Load budget data files from a static JSON directory</li>
                        <li>Use LocalStorage to save your results on your device (optional)</li>
                        <li>Make everything open source for public audit</li>
                        <li>Host as a static site on GitHub Pages</li>
                    </ul>
                </div>

                <div style="background: var(--bg-light); padding: var(--spacing-xl); border-radius: var(--radius-lg); border-left: 4px solid #dc3545;">
                    <h3 style="color: #dc3545; margin-top: 0;">‚ùå What We DON'T DO</h3>
                    <ul style="line-height: 1.8;">
                        <li>Upload your PDF to any server</li>
                        <li>Transmit your tax information over the internet</li>
                        <li>Store your data in a database</li>
                        <li>Track, log, or analyze user behavior</li>
                        <li>Use cookies, analytics, or advertising</li>
                        <li>Require user accounts or authentication</li>
                        <li>Make any external API calls (except to load CDN libraries)</li>
                    </ul>
                </div>
            </section>

            <!-- Code Quality -->
            <section style="margin-bottom: var(--spacing-2xl);">
                <h2 style="color: var(--patriot-blue); border-bottom: 3px solid var(--patriot-red); padding-bottom: var(--spacing-sm); margin-bottom: var(--spacing-lg);">Code Quality & Testing</h2>

                <div style="background: white; padding: var(--spacing-xl); border-radius: var(--radius-lg); box-shadow: var(--shadow-md);">
                    <h3 style="color: var(--patriot-blue); margin-top: 0;">Production-Ready Standards</h3>
                    <p style="line-height: 1.8;">All code has been reviewed and optimized for production use:</p>
                    <ul style="line-height: 1.8;">
                        <li><strong>Error Handling:</strong> Comprehensive try-catch blocks with user-friendly error messages</li>
                        <li><strong>Input Validation:</strong> Strict file type checking, bounds validation on all numeric inputs</li>
                        <li><strong>Rounding Accuracy:</strong> Special handling to ensure category totals always match (no penny discrepancies)</li>
                        <li><strong>Memory Management:</strong> Event listeners properly cleaned up, no memory leaks</li>
                        <li><strong>Storage Quotas:</strong> LocalStorage quota exceeded errors handled gracefully</li>
                        <li><strong>Security:</strong> No eval(), no unsafe code execution, XSS prevention</li>
                    </ul>
                    <p style="margin-bottom: 0;"><a href="https://github.com/tejasgadhia/personal-tax-analyzer/blob/main/TEST_RESULTS.md" target="_blank" style="color: var(--patriot-blue);">View complete test results ‚Üí</a></p>
                </div>
            </section>

            <!-- Browser Compatibility -->
            <section style="margin-bottom: var(--spacing-2xl);">
                <h2 style="color: var(--patriot-blue); border-bottom: 3px solid var(--patriot-red); padding-bottom: var(--spacing-sm); margin-bottom: var(--spacing-lg);">Browser Compatibility</h2>

                <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: var(--shadow-md); border-radius: var(--radius-md); overflow: hidden;">
                    <thead style="background: var(--patriot-blue); color: white;">
                        <tr>
                            <th style="padding: var(--spacing-md); text-align: left;">Browser</th>
                            <th style="padding: var(--spacing-md); text-align: left;">Minimum Version</th>
                            <th style="padding: var(--spacing-md); text-align: left;">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: var(--spacing-md);">Chrome</td>
                            <td style="padding: var(--spacing-md);">90+</td>
                            <td style="padding: var(--spacing-md); color: #28a745;">‚úì Tested</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: var(--spacing-md);">Firefox</td>
                            <td style="padding: var(--spacing-md);">88+</td>
                            <td style="padding: var(--spacing-md); color: #28a745;">‚úì Tested</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: var(--spacing-md);">Safari</td>
                            <td style="padding: var(--spacing-md);">14+</td>
                            <td style="padding: var(--spacing-md); color: #28a745;">‚úì Tested</td>
                        </tr>
                        <tr>
                            <td style="padding: var(--spacing-md);">Edge</td>
                            <td style="padding: var(--spacing-md);">90+</td>
                            <td style="padding: var(--spacing-md); color: #28a745;">‚úì Tested</td>
                        </tr>
                    </tbody>
                </table>

                <p style="margin-top: var(--spacing-lg); padding: var(--spacing-md); background: var(--bg-light); border-radius: var(--radius-md);"><strong>Note:</strong> Mobile devices are not currently supported due to visualization complexity. Minimum screen width: 1024px.</p>
            </section>

            <!-- Open Source -->
            <section style="margin-bottom: var(--spacing-2xl);">
                <h2 style="color: var(--patriot-blue); border-bottom: 3px solid var(--patriot-red); padding-bottom: var(--spacing-sm); margin-bottom: var(--spacing-lg);">Open Source & Transparency</h2>

                <div style="background: white; padding: var(--spacing-xl); border-radius: var(--radius-lg); box-shadow: var(--shadow-md);">
                    <p style="line-height: 1.8;">
                        The complete source code is available on GitHub for public inspection, verification, and contribution. You can audit every line of code to verify our privacy claims.
                    </p>
                    <p style="line-height: 1.8;">
                        <strong>Repository:</strong> <a href="https://github.com/tejasgadhia/personal-tax-analyzer" target="_blank" style="color: var(--patriot-blue);">github.com/tejasgadhia/personal-tax-analyzer</a>
                    </p>
                    <p style="line-height: 1.8; margin-bottom: 0;">
                        <strong>License:</strong> MIT License (free and open source)
                    </p>
                </div>
            </section>

            <!-- FAQ -->
            <section style="margin-bottom: var(--spacing-2xl);">
                <h2 style="color: var(--patriot-blue); border-bottom: 3px solid var(--patriot-red); padding-bottom: var(--spacing-sm); margin-bottom: var(--spacing-lg);">Frequently Asked Questions</h2>

                <div class="faq-item" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm);">
                    <h4 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Can you see my tax return?</h4>
                    <p style="margin: 0; line-height: 1.8;">No. Your PDF is processed entirely in your browser. We have no servers to receive or store your data. It's technically impossible for us to see your tax return.</p>
                </div>

                <div class="faq-item" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm);">
                    <h4 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Is my data encrypted?</h4>
                    <p style="margin: 0; line-height: 1.8;">Your data never leaves your device, so encryption during transmission is not applicable. When saved to LocalStorage, data is stored in your browser's secure storage (same security as browser cookies).</p>
                </div>

                <div class="faq-item" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm);">
                    <h4 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">How accurate are the budget allocations?</h4>
                    <p style="margin: 0; line-height: 1.8;">Budget percentages come from official OMB, CBO, and Treasury data. Calculations are mathematically precise. However, this is an educational approximation‚Äîreal tax allocation is more complex. See our <a href="sources.html" style="color: var(--patriot-blue);">data sources page</a> for details.</p>
                </div>

                <div class="faq-item" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm);">
                    <h4 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Can I use this for tax filing?</h4>
                    <p style="margin: 0; line-height: 1.8;">No. This tool is for educational purposes only. It visualizes budget spending, not tax deductions or credits. Consult a tax professional for tax advice.</p>
                </div>

                <div class="faq-item" style="background: white; padding: var(--spacing-lg); margin-bottom: var(--spacing-md); border-radius: var(--radius-md); box-shadow: var(--shadow-sm);">
                    <h4 style="color: var(--patriot-blue); margin: 0 0 var(--spacing-sm) 0;">Why desktop only?</h4>
                    <p style="margin: 0; line-height: 1.8;">The Sankey diagram visualization requires substantial screen real estate to be readable and interactive. Mobile support is planned for v0.2.0.</p>
                </div>
            </section>

            <!-- Footer -->
            <footer style="margin-top: var(--spacing-2xl); padding-top: var(--spacing-xl); border-top: 1px solid var(--border); text-align: center; color: var(--text-secondary); font-size: var(--font-size-sm);">
                <p>Last Updated: January 2026 ‚Ä¢ Version 0.1.1</p>
                <p>Questions or concerns? <a href="https://github.com/tejasgadhia/personal-tax-analyzer/issues" style="color: var(--patriot-blue);">Open an issue on GitHub</a></p>
            </footer>
        </div>
    </main>
</body>
</html>
